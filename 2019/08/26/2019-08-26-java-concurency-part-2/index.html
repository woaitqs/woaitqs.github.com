<!DOCTYPE html>
<html lang=zh>
<head><meta name="generator" content="Hexo 3.9.0">
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="è¿™ç¯‡æ–‡ç« æ˜¯æœ€ä½³å¹¶å‘å®è·µçš„ç¬¬äºŒç¯‡ï¼Œé‡ç‚¹ä»‹ç»JVMçš„çº¿ç¨‹åŸç†">
<meta name="keywords" content="program,concurrency,volatile,synchronized">
<meta property="og:type" content="article">
<meta property="og:title" content="Android æœ€ä½³å¹¶å‘å®è·µä¹‹çº¿ç¨‹ç¯‡">
<meta property="og:url" content="http://www.woaitqs.cc/2019/08/26/2019-08-26-java-concurency-part-2/index.html">
<meta property="og:site_name" content="Droid&#39;s blogs">
<meta property="og:description" content="è¿™ç¯‡æ–‡ç« æ˜¯æœ€ä½³å¹¶å‘å®è·µçš„ç¬¬äºŒç¯‡ï¼Œé‡ç‚¹ä»‹ç»JVMçš„çº¿ç¨‹åŸç†">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://www.woaitqs.cc/images/blog/thread-state.jpg">
<meta property="og:image" content="http://www.woaitqs.cc/images/blog/thread-runnable.png">
<meta property="og:image" content="http://www.woaitqs.cc/images/blog/android-debugger-thread.png">
<meta property="og:updated_time" content="2019-08-26T13:06:58.602Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android æœ€ä½³å¹¶å‘å®è·µä¹‹çº¿ç¨‹ç¯‡">
<meta name="twitter:description" content="è¿™ç¯‡æ–‡ç« æ˜¯æœ€ä½³å¹¶å‘å®è·µçš„ç¬¬äºŒç¯‡ï¼Œé‡ç‚¹ä»‹ç»JVMçš„çº¿ç¨‹åŸç†">
<meta name="twitter:image" content="http://www.woaitqs.cc/images/blog/thread-state.jpg">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Android æœ€ä½³å¹¶å‘å®è·µä¹‹çº¿ç¨‹ç¯‡</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
      <link rel="alternate" href="/atom.xml" title="Droid&#39;s blogs" type="application/atom+xml">
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">é¦–é¡µ</a></li>
         
          <li><a href="/about/">å…³äº</a></li>
         
          <li><a href="/archives/">å½’æ¡£</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" href="/2019/08/09/2019-08-09-java-concurency-part-1/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">ä¸Šä¸€ç¯‡</span>
      <span id="i-next" class="info" style="display:none;">ä¸‹ä¸€ç¯‡</span>
      <span id="i-top" class="info" style="display:none;">è¿”å›é¡¶éƒ¨</span>
      <span id="i-share" class="info" style="display:none;">åˆ†äº«æ–‡ç« </span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://www.woaitqs.cc/2019/08/26/2019-08-26-java-concurency-part-2/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://www.woaitqs.cc/2019/08/26/2019-08-26-java-concurency-part-2/&text=Android æœ€ä½³å¹¶å‘å®è·µä¹‹çº¿ç¨‹ç¯‡"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://www.woaitqs.cc/2019/08/26/2019-08-26-java-concurency-part-2/&title=Android æœ€ä½³å¹¶å‘å®è·µä¹‹çº¿ç¨‹ç¯‡"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://www.woaitqs.cc/2019/08/26/2019-08-26-java-concurency-part-2/&is_video=false&description=Android æœ€ä½³å¹¶å‘å®è·µä¹‹çº¿ç¨‹ç¯‡"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Android æœ€ä½³å¹¶å‘å®è·µä¹‹çº¿ç¨‹ç¯‡&body=Check out this article: http://www.woaitqs.cc/2019/08/26/2019-08-26-java-concurency-part-2/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://www.woaitqs.cc/2019/08/26/2019-08-26-java-concurency-part-2/&title=Android æœ€ä½³å¹¶å‘å®è·µä¹‹çº¿ç¨‹ç¯‡"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://www.woaitqs.cc/2019/08/26/2019-08-26-java-concurency-part-2/&title=Android æœ€ä½³å¹¶å‘å®è·µä¹‹çº¿ç¨‹ç¯‡"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://www.woaitqs.cc/2019/08/26/2019-08-26-java-concurency-part-2/&title=Android æœ€ä½³å¹¶å‘å®è·µä¹‹çº¿ç¨‹ç¯‡"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://www.woaitqs.cc/2019/08/26/2019-08-26-java-concurency-part-2/&title=Android æœ€ä½³å¹¶å‘å®è·µä¹‹çº¿ç¨‹ç¯‡"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://www.woaitqs.cc/2019/08/26/2019-08-26-java-concurency-part-2/&name=Android æœ€ä½³å¹¶å‘å®è·µä¹‹çº¿ç¨‹ç¯‡&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#å¼•è¨€"><span class="toc-number">1.</span> <span class="toc-text">å¼•è¨€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#New"><span class="toc-number">2.</span> <span class="toc-text">New</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Runnable"><span class="toc-number">3.</span> <span class="toc-text">Runnable</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Blocked"><span class="toc-number">4.</span> <span class="toc-text">Blocked</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Blocked-enter-a-synchronized-block"><span class="toc-number">4.1.</span> <span class="toc-text">Blocked - enter a synchronized block</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Blocked-reenter-a-synchronized-block-after-object-wait"><span class="toc-number">4.2.</span> <span class="toc-text">Blocked - reenter a synchronized block after object.wait</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Waiting"><span class="toc-number">5.</span> <span class="toc-text">Waiting</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#no-timeout-wait"><span class="toc-number">5.1.</span> <span class="toc-text">no timeout wait</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#no-timeout-join"><span class="toc-number">5.2.</span> <span class="toc-text">no timeout join</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LockSupport-park"><span class="toc-number">5.3.</span> <span class="toc-text">LockSupport.park</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Timed-Waiting"><span class="toc-number">6.</span> <span class="toc-text">Timed_Waiting</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Terminated"><span class="toc-number">7.</span> <span class="toc-text">Terminated</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Android-ä¸­æŸ¥çœ‹çº¿ç¨‹çŠ¶æ€"><span class="toc-number">8.</span> <span class="toc-text">Android ä¸­æŸ¥çœ‹çº¿ç¨‹çŠ¶æ€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ–‡æ¡£ä¿¡æ¯"><span class="toc-number">9.</span> <span class="toc-text">æ–‡æ¡£ä¿¡æ¯</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    
    <h1 class="posttitle" itemprop="name headline">
        Android æœ€ä½³å¹¶å‘å®è·µä¹‹çº¿ç¨‹ç¯‡
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Droid's blogs</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2019-08-26T12:32:07.000Z" itemprop="datePublished">2019-08-26</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/program/">program</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/concurrency/">concurrency</a>, <a class="tag-link" href="/tags/program/">program</a>, <a class="tag-link" href="/tags/synchronized/">synchronized</a>, <a class="tag-link" href="/tags/volatile/">volatile</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h2><p>åœ¨<a href="https://woaitqs.cc/2019/08/09/2019-08-09-java-concurency-part-1/" target="_blank" rel="noopener">ä¸Šä¸€ç¯‡æ–‡ç« </a>ä¸­ï¼Œæˆ‘ä»¬ç®€è¦åœ°äº†è§£äº†ä¸‹ Android å¼€å‘å®è·µä¸­éœ€è¦äº†è§£çš„åŸºç¡€çŸ¥è¯†ï¼ŒçŸ¥é“æ€æ ·çš„ä»£ç æ˜¯å¹¶å‘å®‰å…¨çš„ã€‚ç°åœ¨æˆ‘ä»¬å†æ¥çœ‹çœ‹å¹¶å‘ä¸­çš„å…·ä½“æ‰§è¡Œè€… â€“ çº¿ç¨‹åˆæ˜¯æ€æ ·çš„ï¼Ÿæœ‰ä»€ä¹ˆæ ·çš„çŸ¥è¯†éœ€è¦äº†è§£ï¼Œå®ƒä»¬æ˜¯å¦‚ä½•åˆä½œæ¥è¿›è¡ŒåŒæ­¥çš„ï¼Ÿ</p>
<p>çº¿ç¨‹ä½œä¸º CPU æœ€å°çš„æ‰§è¡Œå•å…ƒï¼Œé€šå¸¸æƒ…å†µä¸‹çš„ Android å¹¶å‘æ˜¯æŒ‡å¤šçº¿ç¨‹ç¯å¢ƒä¸‹è¿›è¡Œå¹¶å‘ï¼Œé‚£ä¹ˆæˆ‘ä»¬é¦–å…ˆäº†è§£ä¸‹çº¿ç¨‹ã€‚CPU è´Ÿè´£è°ƒåº¦çº¿ç¨‹èµ„æºï¼Œé€šè¿‡å„ç§è°ƒåº¦æœºåˆ¶ï¼Œé›¨éœ²å‡æ²¾ï¼Œå°†æ¯ä¸ªçº¿ç¨‹éƒ½è¿è½¬èµ·æ¥ã€‚ä½†æ—¢ç„¶æœ‰è°ƒåº¦æœºåˆ¶ï¼Œé‚£æ¯ä¸€ä¸ªçº¿ç¨‹ä¸å¯èƒ½ä¸€ç›´åœ¨è¿è¡Œï¼Œè¿™æ ·çº¿ç¨‹å°±æœ‰äº†çŠ¶æ€ï¼Œé€šè¿‡å¯¹è¿™äº›çŠ¶æ€çš„åˆ†æï¼Œæˆ‘ä»¬å°±èƒ½ä»å¦ä¸€ä¸ªè§’åº¦äº†è§£çº¿ç¨‹æ˜¯å¦‚ä½•è¿è¡Œçš„ã€‚</p>
<p><img src="/images/blog/thread-state.jpg" alt="java thread state"></p>
<p>ä¸Šå›¾å°±æ˜¯ thread å¯èƒ½å¤„äºçš„çŠ¶æ€ï¼Œçœ‹ä¸Šå»å¾ˆå¤æ‚ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€æ­¥çªç ´ï¼Œä¸€ä¸ªçŠ¶æ€ä¸€ä¸ªçŠ¶æ€åœ°åˆ†æã€‚</p>
<p>å†è¿›è¡Œè¯¦ç»†çš„è®²è§£ä¹‹å‰ï¼Œå…ˆè¯´æ˜ä¸€ä¸‹æœ¬æ–‡æ‰€è®²çš„çº¿ç¨‹çŠ¶æ€éƒ½æ˜¯åŸºäº<code>è™šæ‹Ÿæœº</code>çš„ï¼Œè€Œé<code>æ“ä½œç³»ç»Ÿ</code>çš„ã€‚ç”±äº Microsoftã€Linuxã€Unix ç­‰ç­‰ï¼Œéƒ½æœ‰è‡ªå·±çš„çº¿ç¨‹æ¨¡å‹ï¼Œå…·ä½“å®ç°çš„æ—¶å€™éƒ½å„è‡ªç»´æŠ¤ç€ä¸åŒçš„çŠ¶æ€ä¿¡æ¯ï¼ŒJava æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„è¯­è¨€ï¼Œå› è€Œå¾—æœ‰è™šæ‹Ÿæœºè¿™ä¸€å±‚æ¥å±è”½ä¸åŒæ“ä½œç³»ç»Ÿä¹‹é—´çš„å·®å¼‚ã€‚æœ¬æ–‡æ‰€ç ”ç©¶çš„æ­£æ˜¯ï¼Œè™šæ‹Ÿæœºè¿™ä¸€å±‚çš„çº¿ç¨‹çŠ¶æ€ï¼Œè€Œéæ“ä½œç³»ç»Ÿçš„çº¿ç¨‹çŠ¶æ€ï¼</p>
<p>æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹çš„ä»£ç <code>thread.getState()</code>ï¼Œæ¥åˆ¤æ–­å½“å‰çº¿ç¨‹æ‰€å¤„äºçš„çŠ¶æ€ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">dumpThread</span><span class="params">(Thread thread)</span> </span>&#123;</span><br><span class="line">  Log.d(<span class="string">"thread"</span>, </span><br><span class="line">		String.format(</span><br><span class="line">			<span class="string">"info:%s, state:%s"</span>, thread, thread.getState()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è™šæ‹Ÿæœºå®šä¹‰äº†6ç§çº¿ç¨‹çŠ¶æ€ï¼Œå’±ä»¬åˆ†åˆ«çœ‹çœ‹ã€‚</p>
<ol>
<li>NEW</li>
<li>RUNNABLE</li>
<li>BLOCKED</li>
<li>WAITING</li>
<li>TIMED_WAITING</li>
<li>TERMINATED</li>
</ol>
<h2 id="New"><a href="#New" class="headerlink" title="New"></a>New</h2><p>è¿™ä¸ªçŠ¶æ€æœ€ç®€å•ï¼Œä½†æˆ‘ä»¬ new å‡ºä¸€ä¸ªçº¿ç¨‹å¯¹è±¡ï¼Œå¹¶æ²¡æœ‰è°ƒç”¨ start æ–¹æ³•æ—¶ï¼Œå®ƒå°±å¤„äº New çŠ¶æ€ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä»£ç ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">thread = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Log.d(<span class="string">"Thread"</span>, <span class="string">"I'm running now."</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="string">"ThreadStateDemo"</span>);</span><br><span class="line"></span><br><span class="line">dumpThread(thread);</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶å¯¹åº”çš„è¾“å‡ºæ˜¯:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D/thread: info:Thread[ThreadStateDemo,5,main], state:NEW</span><br></pre></td></tr></table></figure>

<h2 id="Runnable"><a href="#Runnable" class="headerlink" title="Runnable"></a>Runnable</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">thread.start();</span><br><span class="line">dumpThread(thread);</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶çš„æ—¥å¿—è¾“å‡ºæ˜¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D/thread: info:Thread[ThreadStateDemo,<span class="number">5</span>,main], state:RUNNABLE</span><br></pre></td></tr></table></figure>

<p>åœ¨è°ƒç”¨ start æ–¹æ³•è¿‡åï¼Œçº¿ç¨‹å°±ä¼šè¿›å…¥åˆ° Runnable çŠ¶æ€ã€‚ä½†æ­¤æ—¶å¹¶ä¸ä¼šç«‹åˆ»æ‰§è¡Œï¼Œè€Œæ˜¯è¿›å…¥åˆ° <code>Ready To Run</code>çš„å­çŠ¶æ€ä¸­ï¼Œå½“è·å–åˆ°çº¿ç¨‹èµ„æºçš„æ—¶å€™ï¼Œçº¿ç¨‹æ‰ä¼šåˆ‡æ¢åˆ° <code>Running</code>çŠ¶æ€ã€‚è€Œ CPU åœ¨æ‰§è¡Œä¸€æ®µæ—¶é—´çš„çº¿ç¨‹è¿‡åï¼Œä¹Ÿä¼šå› ä¸ºç”¨å®Œæ—¶é—´ç‰‡ï¼Œè€Œå†æ¬¡åˆ‡æ¢å›<code>Ready To Run</code>ï¼Œå‘¨è€Œå¤å§‹åœ°è¿™ä¹ˆè¿è½¬ã€‚</p>
<p>RUNNABLE çš„æ³¨é‡Šå¦‚ä¸‹</p>
<blockquote>
<p>Thread state for a runnable thread. A thread in the runnable state is executing in the Java virtual machine but it may be waiting for other resources from the operating system such as processor.</p>
</blockquote>
<p>æ­¤æ—¶æˆ‘ä»¬æ˜¯æ— æ³•é€šè¿‡å‰é¢çš„ä»£ç æ¥åŒºåˆ†å‡ºï¼Œçº¿ç¨‹æ˜¯ Running çŠ¶æ€ï¼Œè¿˜æ˜¯ Ready To Run çŠ¶æ€ã€‚</p>
<p>å› ä¸ºä¸¤ä¸ªçŠ¶æ€çš„åˆ‡æ¢ï¼Œæ˜ å°„åˆ°äº†æ“ä½œç³»ç»Ÿåº•å±‚çš„çº¿ç¨‹ä¸Šï¼ŒæŠŠè°ƒåº¦å§”æ‰˜ç»™äº†æ“ä½œç³»ç»Ÿï¼Œæˆ‘ä»¬åœ¨è™šæ‹Ÿæœºå±‚é¢çœ‹åˆ°çš„çŠ¶æ€å®è´¨æ˜¯å¯¹åº•å±‚çŠ¶æ€çš„æ˜ å°„åŠåŒ…è£…ã€‚JVM æœ¬èº«æ²¡æœ‰åšä»€ä¹ˆå®è´¨çš„è°ƒåº¦ï¼ŒæŠŠåº•å±‚çš„ <code>Ready To Run</code> åŠ <code>Running</code> çŠ¶æ€æ˜ å°„ä¸Šæ¥ä¹Ÿæ²¡å¤šå¤§æ„ä¹‰ï¼Œå› æ­¤ï¼Œç»Ÿä¸€æˆä¸º Runnable çŠ¶æ€æ˜¯ä¸é”™çš„é€‰æ‹©ã€‚</p>
<p>è¿™é‡Œè¿˜éœ€è¦ç‰¹åˆ«æ³¨æ„çš„åœ°æ–¹æ˜¯ I/O æ“ä½œï¼Œé€šå¸¸æƒ…å†µä¸‹ I/O æ“ä½œçš„è€—æ—¶ç¨‹åº¦æ˜¯è¿œå¤§äºä¸€ä¸ªæ—¶é—´åˆ†ç‰‡çš„ï¼Œå› è€Œæ­£å¸¸æƒ…å†µä¸‹åœ¨æ‰§è¡Œ I/O æ“ä½œæ—¶ï¼Œéƒ½ä¼šæš‚æ—¶æŒ‚èµ· CPUï¼Œç­‰å¾… I/O æ“ä½œæ‰§è¡Œå®Œæ¯•è¿‡åçš„ä¸­æ–­ä¿¡å·ï¼Œè€Œæ¢å¤è¿è¡Œã€‚é‚£ä¹ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯¹äºè™šæ‹Ÿæœºçš„çº¿ç¨‹çŠ¶æ€è€Œè¨€ï¼Œè¿˜æ˜¯å¤„äº Runnable å—ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œä»è™šæ‹Ÿæœºçš„è§’åº¦ä¸Šçœ‹ï¼Œè¯¥çº¿ç¨‹å°±æ˜¯åœ¨æ‰§è¡Œ I/O æ“ä½œï¼Œæ‰ä¸ä¼šå…³å¿ƒè¦æ€æ ·æ‰§è¡Œï¼Œè¦æ€ä¹ˆå¤„ç†ä¸­æ–­ï¼Œé‚£éƒ½æ˜¯æ“ä½œç³»ç»Ÿçš„äº‹æƒ…ã€‚</p>
<p><img src="/images/blog/thread-runnable.png" alt="å›¾ç‰‡æ¥è‡ªè‚–å›½æ ‹çš„åšå®¢"></p>
<h2 id="Blocked"><a href="#Blocked" class="headerlink" title="Blocked"></a>Blocked</h2><p><del>åˆ’é‡ç‚¹ï¼Œè¿™æ˜¯è€ƒè¯•å¿…è€ƒå†…å®¹ã€‚</del><br>è¿™éƒ¨åˆ†çš„çº¿ç¨‹çŠ¶æ€ï¼Œå°±ä¸åŒæ­¥æœ‰ç€å·¨å¤§çš„å…³ç³»äº†ï¼Œæˆ‘ä»¬æ¥å…·ä½“äº†è§£ä¸‹ Blocked çŠ¶æ€æ˜¯æ€æ ·çš„ã€‚</p>
<blockquote>
<p>Thread state for a thread blocked waiting for a monitor lock. A thread in the blocked state is waiting for a monitor lock to enter a synchronized block/method or reenter a synchronized block/method after calling {@link Object#wait() Object.wait}.</p>
</blockquote>
<p>ä»è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬èƒ½å¤Ÿåˆ†æå‡ºä¸¤ç§æƒ…å†µã€‚</p>
<ol>
<li>éœ€è¦ç­‰å¾…ç›‘è§†å™¨é”å»è¿›å…¥ä¸€ä¸ªåŒæ­¥å—æ—¶ã€‚</li>
<li>åœ¨ä¸€ä¸ªåŒæ­¥å—ä¸­ï¼Œæ‰§è¡Œ <code>Object.wait</code> è¿‡åï¼Œå†æ¬¡ç­‰å¾…è¿›å…¥åŒæ­¥å—æ—¶ã€‚</li>
</ol>
<h3 id="Blocked-enter-a-synchronized-block"><a href="#Blocked-enter-a-synchronized-block" class="headerlink" title="Blocked - enter a synchronized block"></a>Blocked - enter a synchronized block</h3><p>å’±ä»¬å…ˆçœ‹ç¬¬ä¸€ç§æƒ…å†µï¼Œ<code>éœ€è¦ç­‰å¾…ç›‘è§†å™¨é”å»è¿›å…¥ä¸€ä¸ªåŒæ­¥å—æ—¶</code>ã€‚æ ¹æ®ç¬¬ä¸€ç¯‡æ–‡ç« ä¸­ synchronized çš„åŸç†ï¼Œå¤šä¸ªçº¿ç¨‹è¿›å…¥åŒä¸€ä¸ªä»£ç å—æ—¶ï¼Œæ²¡æœ‰æŒæœ‰é”çš„çº¿ç¨‹å°±å¿…é¡»ç­‰å¾…ï¼Œè¿™é‡Œè¯´çš„å°±æ˜¯è¿™ç§æƒ…å†µã€‚</p>
<p>æˆ‘ä»¬ä»å…·ä½“çš„ä»£ç å…¥æ‰‹ï¼Œåˆ†æä¸‹è¿™ç§æƒ…å†µã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">syncTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  Runnable runnable = <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">synchronized</span> (MainActivity.<span class="keyword">this</span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">          e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  Thread threadA = <span class="keyword">new</span> Thread(runnable, <span class="string">"thread-A"</span>);</span><br><span class="line">  Thread threadB = <span class="keyword">new</span> Thread(runnable, <span class="string">"thread-B"</span>);</span><br><span class="line">  Thread threadC = <span class="keyword">new</span> Thread(runnable, <span class="string">"thread-C"</span>);</span><br><span class="line">  threadA.start();</span><br><span class="line">  threadB.start();</span><br><span class="line">  threadC.start();</span><br><span class="line">  dumpThread(threadA);</span><br><span class="line">  dumpThread(threadB);</span><br><span class="line">  dumpThread(threadC);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶ä¼šè¾“å‡ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">D/thread: info:Thread[thread-A,5,main], state:TIMED_WAITING</span><br><span class="line">D/thread: info:Thread[thread-B,5,main], state:BLOCKED</span><br><span class="line">D/thread: info:Thread[thread-C,5,main], state:BLOCKED</span><br></pre></td></tr></table></figure>

<p>B å’Œ C çº¿ç¨‹éƒ½å› ä¸ºæ²¡æœ‰æŠ¢åˆ°é”ï¼Œè€Œä¸å¾—ä¸ç­‰å¾…ï¼Œæ­¤æ—¶çš„ç”¨æˆ·çŠ¶æ€æ­£æ˜¯ Blockedã€‚</p>
<p>è¿™é‡Œå¼•å…¥ä¸€ä¸ªæ¦‚å¿µï¼ŒEntry Setï¼Œé“ä¸Šäººä¹Ÿå°Šç§°ä¸ºé”æ± ã€‚å½“å¤šä¸ªçº¿ç¨‹ç«äº‰é”æ—¶ï¼Œä¼šæŠ¢å åˆ°èµ„æºçš„çº¿ç¨‹ï¼Œä¼šè¢«åŠ å…¥åˆ°é”æ± ä¸­ã€‚å½“é”é‡Šæ”¾æ—¶ï¼Œé”æ± ä¸­çš„ä»»æ„ä¸€ä¸ªçº¿ç¨‹ä¼šè¢«å”¤é†’ï¼Œä¸å…¶ä»–æ´»è·ƒçº¿ç¨‹å†æ¬¡æŠ¢å é”ã€‚å¦‚æœæˆåŠŸå ç”¨é”ï¼Œå°±ä»é”æ± ä¸­ç§»é™¤ï¼Œå¦åˆ™å°±è€è€å®å®å‘†ç€é”æ± ä¸­ã€‚</p>
<h3 id="Blocked-reenter-a-synchronized-block-after-object-wait"><a href="#Blocked-reenter-a-synchronized-block-after-object-wait" class="headerlink" title="Blocked - reenter a synchronized block after object.wait"></a>Blocked - reenter a synchronized block after object.wait</h3><p>ç¬¬äºŒç§æƒ…å†µï¼Œå¬ä¸Šå»éå¸¸æ‹—å£ï¼Œä¸€è¦å†æ¬¡è¿›å…¥åŒæ­¥å—ï¼ŒäºŒè¦è°ƒç”¨ wait æ–¹æ³•ã€‚è¿™é‡Œå¿…é¡»è¦äº†è§£ä¸¤ä¸ªé¢å¤–çš„æ¦‚å¿µï¼Œwait å’Œ ç­‰å¾…æ± ã€‚</p>
<p>æˆ‘ä»¬è®¾æƒ³è¿™æ ·ä¸€ç§åœºæ™¯ï¼Œå¤§å®¶éƒ½åœ¨æ’é˜Ÿä½¿ç”¨å’–å•¡æœºå–å’–å•¡ã€‚æœ€å¼€å§‹çš„æ—¶å€™ï¼Œå¤§å®¶éƒ½ä¾æ¬¡å æœ‰å’–å•¡æœº(ğŸ”)ï¼Œå¼„å¥½å’–å•¡è¿‡åå†é‡Šæ”¾æ‰ï¼Œé˜Ÿä¼ä¹Ÿä¸¥è°¨åœ°å¾€å‰æ­¥è¿›ï¼›ä½†æ­¤æ—¶ï¼Œä¸€ä¸ªè¿æ°”ä¸å¥½çš„å°å§å§ï¼Œåœ¨ä½¿ç”¨å’–å•¡æœºçš„æ—¶å€™ï¼Œå‘ç°å’–å•¡æœºé‡Œé¢çš„ç‰›å¥¶ğŸ¥›ä¸å¤Ÿäº†ï¼Œæ­¤æ—¶å°±è¦å¼•ç”³å‡º<code>wait</code>è¿™ä¸€å“²å­¦æ“ä½œäº†ã€‚å°å§å§æ­¤æ—¶åªèƒ½æš‚æ—¶æ”¾å¼ƒå’–å•¡æœº(ğŸ”), åœ¨ä¸€æ—ç­‰å¾…ã€‚å·¥ä½œäººå‘˜æ·»åŠ ç‰›å¥¶ğŸ¥›è¿‡åï¼Œè°ƒç”¨ notify/notifyAll è¿‡åï¼Œå†è¿›è¡Œæ’é˜Ÿå¼„å’–å•¡ã€‚</p>
<p>wait çš„è¯­ä¹‰æ˜¯æš‚æ—¶æ”¾å¼ƒé”ï¼Œç­‰å¾…å…¶ä»–çº¿ç¨‹è°ƒç”¨ notify/notifyAllã€‚è¦æ³¨æ„åˆ° wait æ–¹æ³•çš„è°ƒç”¨ä¸€å®šæ˜¯åœ¨åŒæ­¥å—ä¸­ï¼Œwait æ˜¯è¦æ”¾å¼ƒé”çš„ï¼Œåªèƒ½åœ¨æŒæœ‰é”è¿‡åæ‰ä¼šé‡Šæ”¾æ‰ã€‚è°ƒç”¨ wait æ“ä½œè¿‡åï¼Œçº¿ç¨‹ä¼šè¿›å…¥<code>ç­‰å¾…æ± </code>ä¸­ï¼Œå…¶ä»–çº¿ç¨‹è°ƒç”¨ notify/notifyAllï¼Œé€šçŸ¥ä»»æ„ä¸€ä¸ªæˆ–è€…å…¨éƒ¨ç­‰å¾…æ± ä¸­çš„çº¿ç¨‹ï¼Œå»å’Œé”æ± å’Œå…¶ä»–æ´»è·ƒçº¿ç¨‹ç«äº‰é”ã€‚</p>
<p>åœ¨ wait è¿‡åï¼Œå†å»ç«äº‰çº¿ç¨‹èµ„æºæ—¶ï¼Œæ­¤æ—¶çš„çŠ¶æ€ä¹Ÿæ˜¯ Blockedã€‚</p>
<p>ä»¥ä¸Šå°±æ˜¯ä¸¤ç§ Blocked çŠ¶æ€çš„æƒ…å†µï¼Œå¤§å®¶ä¹Ÿå¤šæ³¨æ„çº¿ç¨‹åœ¨ Blocked ä¸Šå¦‚ä½•å¤„ç†çš„ï¼Œä¹Ÿå¯¹æˆ‘ä»¬å¦‚ä½•å†™åŒæ­¥ä»£ç æä¾›å¸®åŠ©ã€‚</p>
<h2 id="Waiting"><a href="#Waiting" class="headerlink" title="Waiting"></a>Waiting</h2><p>å†æ¥çœ‹çœ‹ Waiting çŠ¶æ€ï¼Œä»å®˜æ–¹æ–‡æ¡£å…¥æ‰‹ã€‚</p>
<blockquote>
<p>Thread state for a waiting thread. A thread is in the waiting state due to calling one of the following methods:</p>
<ol>
<li>{@link Object#wait() Object.wait} with no timeout</li>
<li>{@link Thread#join() Thread.join} with no timeout</li>
<li>{@link LockSupport#park() LockSupport.park}</li>
</ol>
</blockquote>
<h3 id="no-timeout-wait"><a href="#no-timeout-wait" class="headerlink" title="no timeout wait"></a>no timeout wait</h3><p>åœ¨ä¸Šä¸€ä¸ªçŠ¶æ€çš„è®²è§£ä¸­ï¼Œæåˆ°äº† wait çš„æ“ä½œï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨äº† waitï¼Œå¹¶ä¸”åœ¨ç­‰å¾… notify/notifyAll çš„è¿‡ç¨‹ä¸­ï¼Œè¯¥çº¿ç¨‹æ‰€å¤„çš„çŠ¶æ€å°±æ˜¯ Waitingã€‚å¦‚æœè¯»è€…æ˜¯æœåŠ¡ç«¯ç›¸å…³çš„äººå‘˜ï¼Œå¯èƒ½ä¼šé‡åˆ°è¿™æ ·ä¸€ä¸ªé¢è¯•é¢˜ï¼Œå°±æ˜¯ç”¨ wait/notify æ¥å®ç°ä¸€ä¸ªç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ã€‚æœ¬æ–‡ä¸»è¦æ˜¯å°†å¹¶å‘ç›¸å…³çš„çŸ¥è¯†ï¼Œå¤§å®¶æœ‰å…´è¶£å…·ä½“å»äº†è§£ä¸‹ã€‚</p>
<h3 id="no-timeout-join"><a href="#no-timeout-join" class="headerlink" title="no timeout join"></a>no timeout join</h3><p>join å°±æ˜¯ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹ç»“æŸï¼Œå¦‚æœæŸ¥çœ‹æºç çš„è¯ï¼Œå°±ä¼šå‘ç°å…¶å¯ä»¥å½“åšéšå¼çš„ wait/notifyã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">join</span><span class="params">(<span class="keyword">long</span> millis)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    <span class="keyword">synchronized</span>(lock) &#123;</span><br><span class="line">    <span class="keyword">long</span> base = System.currentTimeMillis();</span><br><span class="line">    <span class="keyword">long</span> now = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (millis &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"timeout value is negative"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (millis == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">while</span> (isAlive()) &#123;</span><br><span class="line">            lock.wait(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (isAlive()) &#123;</span><br><span class="line">            <span class="keyword">long</span> delay = millis - now;</span><br><span class="line">            <span class="keyword">if</span> (delay &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            lock.wait(delay);</span><br><span class="line">            now = System.currentTimeMillis() - base;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="LockSupport-park"><a href="#LockSupport-park" class="headerlink" title="LockSupport.park"></a>LockSupport.park</h3><p>LookSupport æ˜¯ JDK 1.6 å¼€å§‹å¼•å…¥çš„åŒæ­¥å·¥å…·ï¼Œæ˜¯çº¿ç¨‹çš„é˜»å¡åŸè¯­ï¼Œç”¨æ¥é˜»å¡çº¿ç¨‹å’Œå”¤é†’çº¿ç¨‹ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ LookSupport æ¥å®ç°è‡ªå·±çš„åŒæ­¥å·¥å…·ã€‚</p>
<h2 id="Timed-Waiting"><a href="#Timed-Waiting" class="headerlink" title="Timed_Waiting"></a>Timed_Waiting</h2><blockquote>
<p>A thread that is waiting for another thread to perform an action for up to a specified waiting time is in this state.</p>
</blockquote>
<p>TIMED_WAITING ä¸ WAITING ä¸»è¦åŒºåˆ«åœ¨äºæ—¶æ•ˆä¸Šé¢ï¼Œå½“æˆ‘ä»¬ waitï¼Œjoinï¼Œsleep æ“ä½œå¸¦æœ‰æ—¶æ•ˆæ—¶ï¼Œå°±ä¼šè¿›å…¥ TIMED_WAITING çŠ¶æ€ã€‚</p>
<p>éœ€è¦é‡ç‚¹æŒ‡å‡ºçš„æ˜¯ sleepã€yield ä¸å¸¦æœ‰ä»»ä½•åŒæ­¥è¯­ä¹‰ã€‚ä»€ä¹ˆæ„æ€å‘¢ï¼Œå°±æ˜¯ sleep ä¹‹å‰æŒæœ‰é”ï¼Œé‚£sleepçš„æ—¶å€™è¿˜æŒæœ‰é”ï¼›å¦‚æœä¸æŒæœ‰ï¼Œsleepçš„æ—¶å€™ä¾ç„¶ä¸æŒæœ‰ã€‚ä¸åŒæ­¥æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚</p>
<p>Waitingã€Timed-Waiting ä¸ Blocked çŠ¶æ€ï¼Œå¯¹äº JVM å±‚é¢ï¼ŒåŒºåˆ«ä¸»è¦åœ¨äºæ˜¯å¦ä¸ºä¸»åŠ¨çš„ã€‚ä¸»åŠ¨åœ°ç­‰å¾…ï¼Œå°±æ˜¯ Waitingã€Timed-Waitingï¼Œè¢«åŠ¨ç­‰å¾…é”å°±æ˜¯ Blocked çŠ¶æ€ã€‚</p>
<h2 id="Terminated"><a href="#Terminated" class="headerlink" title="Terminated"></a>Terminated</h2><p>è¿™ä¸ªå°±ç›¸å¯¹ç®€å•äº›äº†ï¼Œä½†çº¿ç¨‹æ‰§è¡Œç»“æŸè¿‡åï¼Œå°±è¿›å…¥äº† TERMINATED çŠ¶æ€ã€‚ä¸”æ— æ³•å†æ¢å¤åˆ°å…¶ä»–çŠ¶æ€ä¸­å»äº†ã€‚</p>
<h2 id="Android-ä¸­æŸ¥çœ‹çº¿ç¨‹çŠ¶æ€"><a href="#Android-ä¸­æŸ¥çœ‹çº¿ç¨‹çŠ¶æ€" class="headerlink" title="Android ä¸­æŸ¥çœ‹çº¿ç¨‹çŠ¶æ€"></a>Android ä¸­æŸ¥çœ‹çº¿ç¨‹çŠ¶æ€</h2><p>å­¦ä»¥è‡´ç”¨ï¼Œæ¥ä¸‹æ¥ä»‹ç»ä¸¤ç§å¸¸è§çš„æ–¹æ³•æ¥æŸ¥çœ‹çº¿ç¨‹çŠ¶æ€ã€‚å½“æˆ‘ä»¬é‡åˆ°åŒæ­¥é—®é¢˜æ—¶ï¼Œå¯ä»¥é€šè¿‡å¯¹çº¿ç¨‹çŠ¶æ€çš„åˆ†æï¼Œå‘ç°ç—‡ç»“æ‰€åœ¨ã€‚</p>
<ol>
<li>Android Debugger</li>
</ol>
<p>åœ¨ Debugger ä¸­ç‚¹å‡» <code>Get thread dump</code> çš„æŒ‰é’®ï¼Œè¿™æ ·å¯ä»¥æŸ¥çœ‹å¿«ç…§æ—¶çš„çº¿ç¨‹çŠ¶æ€ã€‚</p>
<p>ç‚¹å‡»æ¯ä¸ªçº¿ç¨‹ï¼Œå¯æœ‰è¯¦ç»†çš„ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š<br>â€œmain@7067â€ prio=5 tid=0x2 nid=NA runnable</p>
<p>å…¶ä¸­ prio æ˜¯æŒ‡ä¼˜å…ˆçº§ã€tidæ˜¯çº¿ç¨‹idï¼Œnidæ˜¯nativeçº¿ç¨‹id</p>
<p><img src="/images/blog/android-debugger-thread.png" alt="android debugger thread"></p>
<ol start="2">
<li>anr dump</li>
</ol>
<p>è¿˜æœ‰ä¸€ç§æŠ€å·§æ˜¯åˆ©ç”¨ Android çš„ ANR æœºåˆ¶ï¼Œå¼ºåˆ¶åº”ç”¨å‘ç”Ÿ ANRï¼Œè¿™æ ·å† dump å‡º anr æ—¥å¿—ï¼Œå³å¯æŸ¥çœ‹å„çº¿ç¨‹çŠ¶æ€ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell kill -3 [pid]</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="æ–‡æ¡£ä¿¡æ¯"><a href="#æ–‡æ¡£ä¿¡æ¯" class="headerlink" title="æ–‡æ¡£ä¿¡æ¯"></a>æ–‡æ¡£ä¿¡æ¯</h2><ul>
<li>ç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²åï¼ˆ<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank" rel="noopener">åˆ›æ„å…±äº«3.0è®¸å¯è¯</a>ï¼‰</li>
<li>å‘è¡¨æ—¥æœŸï¼š2019å¹´08æœˆ26æ—¥</li>
<li>ç¤¾äº¤åª’ä½“ï¼š<a href="http://weibo.com/woaitqs" target="_blank" rel="noopener">weibo.com/woaitqs</a></li>
<li>Feedè®¢é˜…ï¼š<a href="http://www.woaitqs.cc/atom.xml">www.woaitqs.cc/atom.xml</a></li>
</ul>
<hr>

  </div>
</article>


        <div id="vcomments"></div>
        <script>
            new Valine({
                el: '#vcomments',
                appId: 'TsNbG48vQyxT0tMC3xCbqg2B-MdYXbMMI',
                appKey: 'HNiBRfYlHGyIbgI65aR1Umgo'
            })
        </script>

        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">é¦–é¡µ</a></li>
         
          <li><a href="/about/">å…³äº</a></li>
         
          <li><a href="/archives/">å½’æ¡£</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#å¼•è¨€"><span class="toc-number">1.</span> <span class="toc-text">å¼•è¨€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#New"><span class="toc-number">2.</span> <span class="toc-text">New</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Runnable"><span class="toc-number">3.</span> <span class="toc-text">Runnable</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Blocked"><span class="toc-number">4.</span> <span class="toc-text">Blocked</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Blocked-enter-a-synchronized-block"><span class="toc-number">4.1.</span> <span class="toc-text">Blocked - enter a synchronized block</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Blocked-reenter-a-synchronized-block-after-object-wait"><span class="toc-number">4.2.</span> <span class="toc-text">Blocked - reenter a synchronized block after object.wait</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Waiting"><span class="toc-number">5.</span> <span class="toc-text">Waiting</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#no-timeout-wait"><span class="toc-number">5.1.</span> <span class="toc-text">no timeout wait</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#no-timeout-join"><span class="toc-number">5.2.</span> <span class="toc-text">no timeout join</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LockSupport-park"><span class="toc-number">5.3.</span> <span class="toc-text">LockSupport.park</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Timed-Waiting"><span class="toc-number">6.</span> <span class="toc-text">Timed_Waiting</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Terminated"><span class="toc-number">7.</span> <span class="toc-text">Terminated</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Android-ä¸­æŸ¥çœ‹çº¿ç¨‹çŠ¶æ€"><span class="toc-number">8.</span> <span class="toc-text">Android ä¸­æŸ¥çœ‹çº¿ç¨‹çŠ¶æ€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ–‡æ¡£ä¿¡æ¯"><span class="toc-number">9.</span> <span class="toc-text">æ–‡æ¡£ä¿¡æ¯</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://www.woaitqs.cc/2019/08/26/2019-08-26-java-concurency-part-2/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://www.woaitqs.cc/2019/08/26/2019-08-26-java-concurency-part-2/&text=Android æœ€ä½³å¹¶å‘å®è·µä¹‹çº¿ç¨‹ç¯‡"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://www.woaitqs.cc/2019/08/26/2019-08-26-java-concurency-part-2/&title=Android æœ€ä½³å¹¶å‘å®è·µä¹‹çº¿ç¨‹ç¯‡"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://www.woaitqs.cc/2019/08/26/2019-08-26-java-concurency-part-2/&is_video=false&description=Android æœ€ä½³å¹¶å‘å®è·µä¹‹çº¿ç¨‹ç¯‡"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Android æœ€ä½³å¹¶å‘å®è·µä¹‹çº¿ç¨‹ç¯‡&body=Check out this article: http://www.woaitqs.cc/2019/08/26/2019-08-26-java-concurency-part-2/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://www.woaitqs.cc/2019/08/26/2019-08-26-java-concurency-part-2/&title=Android æœ€ä½³å¹¶å‘å®è·µä¹‹çº¿ç¨‹ç¯‡"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://www.woaitqs.cc/2019/08/26/2019-08-26-java-concurency-part-2/&title=Android æœ€ä½³å¹¶å‘å®è·µä¹‹çº¿ç¨‹ç¯‡"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://www.woaitqs.cc/2019/08/26/2019-08-26-java-concurency-part-2/&title=Android æœ€ä½³å¹¶å‘å®è·µä¹‹çº¿ç¨‹ç¯‡"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://www.woaitqs.cc/2019/08/26/2019-08-26-java-concurency-part-2/&title=Android æœ€ä½³å¹¶å‘å®è·µä¹‹çº¿ç¨‹ç¯‡"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://www.woaitqs.cc/2019/08/26/2019-08-26-java-concurency-part-2/&name=Android æœ€ä½³å¹¶å‘å®è·µä¹‹çº¿ç¨‹ç¯‡&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> èœå•</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> ç›®å½•</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> åˆ†äº«</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> è¿”å›é¡¶éƒ¨</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2019 Qisen Tang
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">é¦–é¡µ</a></li>
         
          <li><a href="/about/">å…³äº</a></li>
         
          <li><a href="/archives/">å½’æ¡£</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

    <!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

    <script type="text/javascript">
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?80435c13fc4c3f32d9ae5e4b1cea4b13";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>

<!-- Disqus Comments -->


</body>
</html>
